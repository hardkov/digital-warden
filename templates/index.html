{% extends "base.html" %} {% block logic %}
<script type="text/javascript" charset="utf-8">
  const socket = io();

  let insertIdx = 0;

  socket.on("countFeed", (count) => {
    const element = document.getElementById("humanCount");
    element.textContent = "Intruders count: " + count;
  });

  socket.on("imgFeed", (img) => {
    const imageList = document.getElementById("lastEvents");

    imageList.children[insertIdx].src = `data:image/jpg;base64,${img}`;

    insertIdx += 1;
    insertIdx %= 5;
  });
</script>
{% endblock %} {% block content %}
<main role="main" class="container">
  <div class="container mt-5">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-6">
        <h2 id="humanCount"></h2>
        <img src="{{ url_for('video_feed') }}" width="100%" />
      </div>
      <div class="col-sm-3"></div>
    </div>
    <div class="row">
      <div class="col-sm-3"><h2>Last events:</h2></div>
    </div>
    <div id="lastEvents" class="row">
      <img class="p-2" width="20%" />
      <img class="p-2" width="20%" />
      <img class="p-2" width="20%" />
      <img class="p-2" width="20%" />
      <img class="p-2" width="20%" />
    </div>
  </div>
</main>
{% endblock %}
